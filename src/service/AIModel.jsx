import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "\"Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\"\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"location\": \"Las Vegas, Nevada\",\n    \"budget\": \"Cheap\",\n    \"travelers\": \"Couple\",\n  \"duration\": \"3 Days\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80 per night\",\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/24/17/28/36/circus-circus-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1280,\n        \"longitude\": -115.1651\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Vegas hotel with a circus theme, offering affordable rooms and family-friendly attractions.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n       \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50 - $90 per night\",\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/22/ff/02/3f/excalibur-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0982,\n        \"longitude\": -115.1717\n      },\n        \"rating\": 4,\n        \"description\": \"A medieval-themed hotel on the Strip with budget-friendly options and fun shows.\"\n    },\n        {\n      \"hotelName\": \"OYO Hotel & Casino Las Vegas\",\n      \"hotelAddress\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n      \"price\": \"$35 - $75 per night\",\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/9c/96/c1/oyo-hotel-casino-las-vegas.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1017,\n        \"longitude\": -115.1706\n      },\n      \"rating\": 3,\n       \"description\": \"Located close to the Las Vegas strip, offers basic rooms for budget travelers\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n       \"bestTimeToVisit\": \"Morning and Evening\",\n      \"theme\": \"Exploring the Strip and Free Attractions\",\n      \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A beautiful indoor garden display that changes seasonally, free to visit.\",\n          \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/13/28/4e/7c/bellagio-conservatory-botanical.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1744\n          },\n          \"ticketPricing\": \"Free\",\n            \"rating\": 4.7,\n          \"timeTravel\": \"15 min walk from Excalibur\"\n        },\n         {\n          \"placeName\": \"Bellagio Fountains Show\",\n          \"placeDetails\": \"A spectacular water fountain show with music and lights, free to watch.\",\n           \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/16/a0/9f/1c/bellagio-fountains.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1129,\n            \"longitude\": -115.1739\n          },\n          \"ticketPricing\": \"Free\",\n            \"rating\": 4.8,\n            \"timeTravel\": \"Located in front of Bellagio\"\n        },\n           {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a light show canopy, free live music and other entertainment.\",\n           \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0d/1e/17/30/fremont-street-experience.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1702,\n            \"longitude\": -115.1412\n          },\n          \"ticketPricing\": \"Free to enter, activities may have fees\",\n            \"rating\": 4.5,\n            \"timeTravel\": \"15-20 min drive from Strip\"\n\n        }\n      ]\n    },\n    \"day2\": {\n      \"bestTimeToVisit\": \"Morning and Afternoon\",\n        \"theme\": \"Nature and a bit of Vegas History\",\n      \"places\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n           \"placeDetails\": \"Scenic desert landscapes with hiking trails (entrance fee applies).\",\n          \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0f/28/8f/99/red-rock-canyon-national.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1463,\n            \"longitude\": -115.4169\n          },\n          \"ticketPricing\": \"$15 per vehicle\",\n          \"rating\": 4.7,\n            \"timeTravel\": \"20-30 min drive from strip\"\n        },\n        {\n          \"placeName\": \"Downtown Container Park\",\n           \"placeDetails\":\"An outdoor shopping and entertainment center made of shipping containers, free to browse.\",\n           \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/11/7c/01/b5/downtown-container-park.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1371\n           },\n          \"ticketPricing\": \"Free to enter, activities may have fees\",\n           \"rating\": 4.3,\n           \"timeTravel\": \"15 min drive from Red Rock Canyon\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"bestTimeToVisit\": \"Morning and Afternoon\",\n       \"theme\":\"Museum and Shopping\",\n      \"places\": [\n        {\n          \"placeName\": \"The Neon Museum\",\n          \"placeDetails\": \"A museum showcasing old neon signs, a unique piece of Vegas history (entrance fee applies).\",\n           \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/6f/3a/88/neon-museum.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1689,\n            \"longitude\": -115.1414\n          },\n          \"ticketPricing\": \"$28 per person\",\n          \"rating\": 4.6,\n           \"timeTravel\": \"15-20 min drive from strip\"\n\n        },\n        {\n          \"placeName\": \"Miracle Mile Shops\",\n          \"placeDetails\":\"An indoor shopping mall with various stores and eateries, free to browse.\",\n           \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/17/12/4a/41/miracle-mile-shops-at.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1090,\n             \"longitude\": -115.1723\n          },\n          \"ticketPricing\": \"Free to enter\",\n            \"rating\": 4.2,\n            \"timeTravel\": \"15 min drive from Neon Museum\"\n        }\n      ]\n    }\n  }\n}\n```\n**Important Notes:**\n\n*   **Prices:** Hotel prices are estimates and can fluctuate greatly depending on the season, day of the week, and availability. It's best to book in advance, especially during peak times. Ticket pricing is also an estimate, double-check official websites for the latest pricing and deals.\n*   **Transportation:** This itinerary assumes you are using a combination of walking, ride-sharing (like Uber or Lyft), and possibly public transportation for places like Fremont Street and Red Rock Canyon. Consider getting a day pass for the bus if you are planning on using it.\n*   **Food:** Food costs are not included in the budget; explore affordable dining options like buffets, fast food, or grocery store meals to stay on budget.\n*   **Free Activities:** There are many free attractions in Vegas (like the Bellagio Fountains, walking the strip, hotel displays). Take advantage of these to save money.\n*   **Flexibility:** This is a sample itinerary. Feel free to customize it to your interests and pace.\n*   **Safety:** Stay aware of your surroundings, especially at night.\n\nEnjoy your trip to Las Vegas! Let me know if you have any more questions.\n"},
          ],
        },
      ],
    });
  
